
rule cxx
  command = cl -c $in /Fo$out
rule link
  command = cl $in /link /out:$out
rule copy
  command = copy $in $out

build test_0.wtf.in: copy test_0.c
build test_0.wtf: copy test_0.wtf.in
build test_1.obj: cxx test_1.cpp
build test_1.lib: link test_1.obj test_0.wtf

build test_2.obj: cxx test_2.cpp
build test_2.exe: link test_2.obj test_1.obj

build test_3.obj: cxx test_3_1.cpp test_3_2.cpp
build test_3.exe: link test_3.obj test_1.lib

build test_4.test: copy test_2.exe

default test_1.lib test_2.exe test_3.exe test_4.test
